#!/bin/sh

declare -a used=(
"ğŸ»github"
"ğŸ’kaggle"
"ğŸ“œnotion"
"ğŸ“ªntu-mail"
"ğŸ¬ntu-cool"
"ğŸ¦¥ntu-wifi"
"ğŸš€neetCode"
)


# pipe the dmenu
Choice=$(printf '%s\n' "ğŸ”§toolBar" "ğŸ“’readingList" "ğŸƒntuBookMark" "ğŸpythonResources" "ğŸ«juliaResources" "ğŸ“‰econData" "ğŸŒwebDevelopment" "${used[@]}" | rofi -dmenu -p "BookMark ğŸ“¡:")

# create the function to get the bookmark
get_BookMark() {
    db=$1
    echo "$db"
    readarray -t dbList < $db  # create the array
    # split the name and the link
    name=$(printf '%s\n' "${dbList[@]}" | awk '{print $1}')
    url=$(printf '%s\n' "${dbList[@]}" | awk '{print $2}')
    declare -a name=($name)
    declare -a url=($url)
    choice=$(printf '%s\n' "${name[@]}" | rofi -dmenu -p "BookMarkğŸ“¡:")
    n=${#name[*]}  # nmber of the element
    for ((i=0; i<$n; i++)); do
        if [ "${name[$i]}" == "$choice" ]; then
            index=$i
            break
        fi
    done
    mode=$(echo -e "ğŸŒ—tab\nğŸŒ•window" | rofi -dmenu -p "choose the modeğŸŒ› ")
    if [ $mode == "ğŸŒ•window" ]; then
        $BROWSER "-new-window" "${url[$index]}"
    else
        $BROWSER "-new-tab" "${url[$index]}"
    fi
}

# reading-list or bookmar
if [ "$Choice" == "ğŸ»github" ]; then
    $BROWSER "-new-tab" "https://github.com/githubjacky?tab=repositories"
elif [ "$Choice" == "ğŸ’kaggle" ]; then
    $BROWSER "-new-tab" "https://www.kaggle.com/"
elif [ "$Choice" == "ğŸ“œnotion" ]; then
    $BROWSER "-new-tab" "https://www.notion.so/summer-study-plan-070c5d09b7a6416683be80727a4e8b26"
elif [ "$Choice" == "ğŸ“ªntu-mail" ]; then
    $BROWSER "-new-tab" "https://mail.ntu.edu.tw/owa/auth/logon.aspx?url=https%3A%2F%2Fmail.ntu.edu.tw%2Fowa%2F&reason=0"
elif [ "$Choice" == "ğŸ¬ntu-cool" ]; then
    $BROWSER "-new-tab" "https://cool.ntu.edu.tw/login/portal"
elif [ "$Choice" == "ğŸ¦¥ntu-wifi" ]; then
    $BROWSER "-new-tab" "https://www.ntu.edu.tw"
elif [ "$Choice" == "ğŸš€neetCode" ]; then
    $BROWSER "-new-tab" "https://neetcode.io/"
elif [ "$Choice" == "ğŸ”§toolBar" ]; then
    get_BookMark "$HOME/.local/share/BookMark/toolBar"
elif [ "$Choice" == "ğŸ“’readingList" ]; then
    get_BookMark "$HOME/.local/share/BookMark/readingList"
elif [ "$Choice" == "ğŸƒntuBookMark" ]; then
    file=$(echo -e "ğŸ“˜juniroFirst\nğŸ”–juniroSecond\nğŸ“šseniorFirst" | rofi -dmenu -p "BookMark ğŸ“¡:")
    file=${file: 1}
    get_BookMark "$HOME/.local/share/BookMark/ntuBookMark/$file"
elif [ "$Choice" == "ğŸpythonResources" ]; then
    get_BookMark "$HOME/.local/share/BookMark/python"
elif [ "$Choice" == "ğŸ«juliaResources" ]; then
    get_BookMark "$HOME/.local/share/BookMark/julia"
elif [ "$Choice" == "ğŸ“‰econData" ]; then
    get_BookMark "$HOME/.local/share/BookMark/econData"
elif [ "$Choice" == "ğŸŒwebDevelopment" ]; then
    get_BookMark "$HOME/.local/share/BookMark/webDevelopment"
fi
